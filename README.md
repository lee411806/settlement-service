# ì •ì‚° ì‹œìŠ¤í…œ í”„ë¡œì íŠ¸

ğŸ“… <b>2024.11.18 ~ 2025.06.12 </b> | (1ëª…)

[![Java][Java]][Java-url]
[![Spring Boot][SpringBoot]][SpringBoot-url]
[![Spring Batch][SpringBatch]][SpringBatch-url]
[![Spring Security][SpringSecurity]][SpringSecurity-url]
[![JWT][JWT]][JWT-url]
[![JPA][JPA]][JPA-url]
[![MySQL][MySQL]][MySQL-url]
[![Redis][Redis]][Redis-url]
[![MasterSlave][MasterSlave]][MasterSlave-url]
[![JMeter][JMeter]][JMeter-url]
[![GitHub Actions][GitHubActions]][GitHubActions-url]
[![Docker Compose][DockerCompose]][DockerCompose-url]

<!-- Badge ì´ë¯¸ì§€ ë§í¬ -->
[Java]: https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=java&logoColor=white
[SpringBoot]: https://img.shields.io/badge/Spring%20Boot-6DB33F?style=for-the-badge&logo=spring-boot&logoColor=white
[SpringBatch]: https://img.shields.io/badge/Spring%20Batch-4DC71F?style=for-the-badge&logo=spring&logoColor=white
[SpringSecurity]: https://img.shields.io/badge/Spring%20Security-6DB33F?style=for-the-badge&logo=spring-security&logoColor=white
[JPA]: https://img.shields.io/badge/JPA-6DB33F?style=for-the-badge&logo=hibernate&logoColor=white
[MySQL]: https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white
[Redis]: https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white
[JWT]: https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white  
[MasterSlave]: https://img.shields.io/badge/Master--Slave-555555?style=for-the-badge&logo=databricks&logoColor=white  
[JMeter]: https://img.shields.io/badge/JMeter-D22128?style=for-the-badge&logo=apache-jmeter&logoColor=white  
[GitHubActions]: https://img.shields.io/badge/GitHub%20Actions-2088FF?style=for-the-badge&logo=github-actions&logoColor=white
[DockerCompose]: https://img.shields.io/badge/Docker%20Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white

<!-- ì›¹ì‚¬ì´íŠ¸ ë§í¬ -->
[Java-url]: https://www.oracle.com/java/
[SpringBoot-url]: https://spring.io/projects/spring-boot
[SpringBatch-url]: https://spring.io/projects/spring-batch
[SpringSecurity-url]: https://spring.io/projects/spring-security
[JPA-url]: https://spring.io/projects/spring-data-jpa
[MySQL-url]: https://www.mysql.com/
[Redis-url]: https://redis.io/
[JWT-url]: https://jwt.io/  
[MasterSlave-url]: https://en.wikipedia.org/wiki/Master/slave_(technology)  
[JMeter-url]: https://jmeter.apache.org/
[GitHubActions-url]: https://github.com/features/actions
[DockerCompose-url]: https://docs.docker.com/compose/

## ê¸°ëŠ¥
| **User-service**          |    **User-Streaming-service**       |
|---------------------|-------------------------------------------------------------|
|   íšŒì›ê°€ì…       |              ë™ì˜ìƒ í†µê³„ ì¡°íšŒ : ì¼ê°„/ì£¼ê°„/ì›”ê°„ (ì¡°íšŒìˆ˜, ì¬ìƒì‹œê°„)    |
|   ë¡œê·¸ì¸   |  ë™ì˜ìƒ ì •ì‚° ì¡°íšŒ : ì¼ê°„/ì£¼ê°„/ì›”ê°„  |
|   ë¡œê·¸ì•„ì›ƒ   |  ì–´ë·°ì§• ë°©ì§€ |

<br>



## ë°°ê²½

- ì‹¤ì‹œê°„ìœ¼ë¡œ ìœ ì…ë˜ëŠ” ë°ì´í„°ê°€ ë§ì•„ì§ˆ ê²½ìš°, **ë§¤ ìš”ì²­ë§ˆë‹¤ í•˜ë‚˜ì˜ RDBMS ì²˜ë¦¬Â·ì¡°íšŒí•˜ë©´ DB ì„œë²„ì— ë¶€í•˜ê°€ ëˆ„ì **ë˜ì–´ í•œê³„ì— ë„ë‹¬í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨  
- ìµœì í™” ì—†ì´ RDBMS ì„œë²„ ë¶€í•˜ê°€ ì¦ê°€í•  ê²½ìš°, **ì‚¬ìš©ì ëŒ€ê¸° ì‹œê°„ì´ ëŠ˜ì–´ë‚˜ê³  ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ìœ¼ë¡œ ì¸í”„ë¼ ë¹„ìš©ì´ ìƒìŠ¹**  
- **ëŒ€ìš©ëŸ‰ ë°ì´í„°ì— ëŒ€í•œ íš¨ìœ¨ì ì¸ ì²˜ë¦¬ ë°©ì•ˆ**ì„ ë§ˆë ¨í•´ì•¼ í•  í•„ìš”ì„± ì¸ì‹  



<br>

## í•´ê²° ë°©ë²•

1. ëŒ€ëŸ‰ ë°ì´í„° **Batchë¡œ ì¼ê´„ì²˜ë¦¬**
    - **Batch 4ë‹¨ê³„ ìµœì í™”**ë¥¼ í†µí•´ ì¡°íšŒ ì „ìš© í…Œì´ë¸” ë°ì´í„° ì…ë ¥, RDBMS ë¶€í•˜ ìµœì†Œí™”
    - ë¡œê·¸ë°ì´í„° **3200ë§Œ ê±´ ê¸°ì¤€ 2ë¶„ 12ì´ˆ ì²˜ë¦¬ (99.83% ì„±ëŠ¥ í–¥ìƒ)**
2. **Read Replica í™œìš©**
    - Replicaë¥¼ í™œìš©í•´ **ìƒì„±, ì¡°íšŒ DBë¥¼ ë¶„ë¦¬**, ì½ê¸° ìš”ì²­ì„ ë¶„ì‚°í•˜ì—¬ ì²˜ë¦¬í•˜ì—¬ ë¶€í•˜ ì™„í™”
3. **Redis ìºì‹±**ì„ í†µí•œ ì‹¤ì‹œê°„ ì‘ë‹µ ì†ë„ ê°œì„ 
    - ì–´ë·°ì§• ë°©ì§€ ê¸°ëŠ¥ API: **100ë§Œ ê±´ ê¸°ì¤€ 283ms â†’ 14ms (95.05% í–¥ìƒ)**
4. **JMeter ë¶€í•˜ í…ŒìŠ¤íŠ¸**ë¥¼ í†µí•œ API ì„±ëŠ¥ ë¶„ì„
    - **TPS(ì´ˆë‹¹ ì²˜ë¦¬ëŸ‰), P99 ì‘ë‹µì‹œê°„** ë“± í•µì‹¬ ì§€í‘œ ëª¨ë‹ˆí„°ë§
    - ì„±ëŠ¥ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ë³‘ëª© êµ¬ê°„ ì‹ë³„ ë° ê°œì„  ì ìš©
  
<br>


## ğŸ”¥í”„ë¡œì íŠ¸ ê²½í—˜

<h2 align="center"> 1. ë°°ì¹˜ ì‘ì—… ì„±ëŠ¥ ê°œì„  (99.83% í–¥ìƒ)</h2>

### 1.1 ìµœì¢… ì„±ëŠ¥
- 3200ë§Œ ê°œ ë°ì´í„° ê¸°ì¤€ ì²˜ë¦¬ ê²°ê³¼: **2ë¶„ 12ì´ˆ (2m12s)**


### 1.2 ì„±ëŠ¥ ê°œì„  ì¶”ì´
| **ë‹¨ê³„**          | **ë°ì´í„° ê·œëª¨**     | **ì²˜ë¦¬ ì‹œê°„**         | **ê°œì„ ìœ¨**       |
|--------------------|---------------------|-----------------------|------------------|
| **ìµœì í™” ì „**      | 3200ë§Œ ê±´           | ì•½ 80,000ì´ˆ (22ì‹œê°„ 13ë¶„) (ì¶”ì •) | -                |
| **4ì°¨ ìµœì í™”**     | 3200ë§Œ ê±´           | ì•½ 132ì´ˆ (2ë¶„ 12ì´ˆ)      | ì•½ 99.83%        |


### 1.3 ì£¼ìš” ê°œì„  í¬ì¸íŠ¸ 
- **1ì°¨ ìµœì í™”**: ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹± ì¶”ê°€, Chunk í¬ê¸° ì¡°ì • ë°ì´í„°  
- **2ì°¨ ìµœì í™”**: íŒŒí‹°ì…”ë‹ ë©€í‹°ìŠ¤ë ˆë“œ ë„ì…
- **3ì°¨ ìµœì í™”**: ìŠ¤ì¼€ì¼ ì—… (MySQL ë²„í¼ í’€ í¬ê¸° ì¡°ì •)
- **4ì°¨ ìµœì í™”**: JPA ì œê±° í›„ JDBC ì‚¬ìš©, ë²Œí¬ ì—°ì‚° ë„ì…

<br>

> ğŸ”— **ì„±ëŠ¥ ê°œì„  ê³¼ì • ì „ì²´ ì •ë¦¬ëŠ” [ì—¬ê¸°](https://www.notion.so/1e943673dd8c806484f6c33a64ad959d)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

<br>
<h2 align="center"> 2. ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ</h2>

### 2.1 Primary Replica ë„ì…
 -** GTID ê¸°ë°˜ Replica** ìƒì„± (ìƒì„± DB commit ì‹œ Replica ë™ê¸°í™”)
 - ì½ê¸° ìš”ì²­(GET)ì„ Replicaë¡œ ë¶„ë¦¬ ì²˜ë¦¬

### 2.2 íŠ¸ëœì­ì…˜ ë° ì»¤ë„¥ì…˜ ì„¤ì •
   - POST API **íŠ¸ëœì­ì…˜ ìµœì†Œí™” (Atomic transaction**)
   - **OSIV ë¹„í™œì„±í™”** â†’ ìš”ì²­ ì¢…ë£Œ ì‹œì ì´ ì•„ë‹Œ ì¦‰ì‹œ ì»¤ë„¥ì…˜ ë°˜í™˜
   - Connection idle-timeout: 60ë¶„ â†’ 30ì´ˆë¡œ ë‹¨ì¶•í•˜ì—¬ ìœ íœ´ ì»¤ë„¥ì…˜ íšŒìˆ˜
   - ê° DB ì„œë²„ **ì»¤ë„¥ì…˜ í’€: 10ê°œ â†’ 30ê°œë¡œ í™•ì¥**

### 2.2 JMeter ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼
- ì¡°íšŒ ìš”ì²­ 10,000ê±´ ê¸°ì¤€  ì ìš© ì „ ëŒ€ë¹„ ìµœëŒ€ 1634ë°° í–¥ìƒ, TPS 18.3ë°° ì¦ê°€
- ì“°ê¸°(POST)ì™€ ì¡°íšŒ(GET) ìš”ì²­ì„ ë™ì‹œì— ì‹¤í–‰í•˜ì—¬ í…ŒìŠ¤íŠ¸
- ì„±ëŠ¥ ê°œì„  ì¶”ì´


  
  | **ì§€í‘œ**       | **ì ìš© ì „** | **ì ìš© í›„** | **ê°œì„  ë‚´ìš©**                           |
  |----------------|-------------|-------------|------------------------------------------|
  | **90% ì§€ì **    | 354ms       | 27ms        |  **327ms ê°œì„  (13.1ë°° í–¥ìƒ)**           |
  | **95% ì§€ì **    | 610ms       | 34ms        |  **576ms ê°œì„  (17.9ë°° í–¥ìƒ)**           |
  | **99% ì§€ì **    | 84994ms     | 52ms        |  **84942ms ê°œì„  (1634ë°° í–¥ìƒ)**        |
  | **Throughput** | 28 TPS      | 513 TPS     |  **18.3ë°° ì¦ê°€**                        |

<sub>ğŸ›ˆ GET ìš”ì²­ì€ ì •ìƒ ì²˜ë¦¬ë˜ì—ˆìœ¼ë‚˜, POSTì™€ ì»¤ë„¥ì…˜ í’€ì„ ê³µìœ í•´ ì¼ë¶€ ìš”ì²­ì´ ì§€ì—°ë˜ì—ˆìŠµë‹ˆë‹¤.  
JMeterëŠ” ì‘ë‹µ ë„ì°© ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì¹˜ë¥¼ ê³„ì‚°í•˜ë¯€ë¡œ, ì¢…ë£Œ ì‹œì ì— ìˆ˜ì¹˜ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ íŠˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
â†’ ì´í›„ ê²°ê³¼ë¥¼ ì¬ê²€í† í–ˆì„ ë•Œ, ì„±ëŠ¥ ê°œì„  ìˆ˜ì¹˜ëŠ” ì‹¤ì œ ì²´ê° ì„±ëŠ¥ê³¼ ë¶ˆì¼ì¹˜í•˜ì˜€ìœ¼ë©°, ë¶€í•˜ ì¢…ë£Œ íƒ€ì´ë° ì™¸ì—ë„ **ì„±ëŠ¥ ê°œì„  ì „ ìˆ˜ì¹˜ ìì²´ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ë†’ì•„ ì •í™•ì„±ì´ ë–¨ì–´ì§ˆ ê°€ëŠ¥ì„±ì´ ë†’ì•˜ìŠµë‹ˆë‹¤.**  ë³¸ ìˆ˜ì¹˜ëŠ” ë‹¹ì‹œ ë³‘ëª© í•´ê²° ê³¼ì •ì„ ê¸°ë¡í•˜ê¸° ìœ„í•œ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ë³´ê´€í•˜ë©°, MSA ì „í™˜ í”„ë¡œì íŠ¸ì—ì„œì˜ ë³‘ëª© í•´ê²° ì‚¬ë¡€ê°€ ìˆìŠµë‹ˆë‹¤.</sub>




<br> 

> ğŸ”— **ì„±ëŠ¥ ê°œì„  ê³¼ì • ì „ì²´ ì •ë¦¬ëŠ” [ì—¬ê¸°](https://www.notion.so/1e343673dd8c80c29a57dd97915920a7)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**


<br>

<h2 align="center"> 3. ì–´ë·°ì§• ë°©ì§€ ê¸°ëŠ¥ ìµœì í™”(95.05% í–¥ìƒ) </h2>

### 3.1 Redis
  - 100ë§Œê°œ ë°ì´í„° ê¸°ì¤€ ì²˜ë¦¬ ê²°ê³¼ : 14ms (20ë²ˆ ìš”ì²­ í‰ê· )
    
  - ì„±ëŠ¥ ê°œì„  ì§€í‘œ

    | **ë‹¨ê³„**          | **ë°ì´í„° ê·œëª¨**     | **ì²˜ë¦¬ ì‹œê°„**         | **ê°œì„ ìœ¨**       |
    |--------------------|---------------------|-----------------------|------------------|
    | **ìµœì í™” ì „**      | 100ë§Œ ê±´           | ì•½ 283ms              | -                |
    | **ìµœì í™” í›„**      | 100ë§Œ ê±´           | ì•½ 14ms               | ì•½ 95.05%        |


 - ì£¼ìš” ê°œì„  í¬ì¸íŠ¸
   - RDBMSì˜ ë³µì¡í•œ ì½ê¸°/ì“°ê¸° ê³¼ì •ì„ Redis ìºì‹œë¡œ ëŒ€ì²´
   - 30ì´ˆ ë§Œë£Œ ê¸°ëŠ¥(TTL)ì„ í™œìš©í•œ ë°ì´í„° ìë™ ì‚­ì œë¡œ ê²€ì¦ìš”ì²­ ê°„ì†Œí™”

<br>

## ğŸ”« íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
- [Spring Batch ìˆœí™˜ ì°¸ì¡° ë° StepScope ë³‘ë ¬ ì²˜ë¦¬ ë¬¸ì œ](https://www.notion.so/Spring-Batch-StepScope-20143673dd8c807ea829e1523356c396)
- [Chunk ë‹¨ìœ„ ë°°ì¹˜ì—ì„œ ë°ì´í„° ëˆ„ì  ì €ì¥ ë¬¸ì œ](https://www.notion.so/Chunk-20143673dd8c80d29224ee27a3d574b7)
- [GTID ë³µì œ ë¬¸ì œ](https://www.notion.so/Slave-1dd43673dd8c804ea65bf12ac33294c4)
- [Spring Boot ë©€í‹° DB ì„¤ì • ì‹œ Repository ì¤‘ë³µ ë“±ë¡ ë¬¸ì œ](https://www.notion.so/Spring-Boot-DB-Repository-1de43673dd8c80e998ede0db785e4e8b)
- [Dockerfile ëˆ„ë½ + í™˜ê²½ ë¶„ë¦¬ + í¬íŠ¸ ì¶©ëŒ](https://www.notion.so/Docker-compose-1dd43673dd8c8041915dd214914ee35c)
- [ğŸ“šê·¸ ì™¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ëª¨ìŒ](https://www.notion.so/1dd43673dd8c80d9a894d5ab991b6952)

<br>

## ğŸ”ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •
- [GitHub Actions ì‚¬ì „ ê²€ì¦ì„ ìœ„í•œ act ë„ì…](https://www.notion.so/GitHub-Actions-act-1dd43673dd8c80379e69f1a008578c23)
- [Replica ë³µì œ ë°©ì‹ ì˜ì‚¬ê²°ì •](https://www.notion.so/Replica-GTID-1e243673dd8c8024b883edc527019ccf)
- [ë‚™ê´€ì , ë¹„ê´€ì  ë½ + Atomic Update ì ìš© ì˜ì‚¬ê²°ì •](https://www.notion.so/Atomic-Update-1f243673dd8c80188185edea0290c6f4)
- [Top5 & ì •ì‚° ë°ì´í„° í…Œì´ë¸” ì„¤ê³„ ì˜ì‚¬ê²°ì •](https://www.notion.so/Top5-20143673dd8c802fb3fbd45066f48948)
- [ğŸ“šê·¸ ì™¸ ì˜ì‚¬ê²°ì • ëª¨ìŒ](https://www.notion.so/1dd43673dd8c8085806ad7d111e7fa9a)


<br>



## ğŸ— ì•„í‚¤í…ì³
<img width="593" alt="í™”ë©´ ìº¡ì²˜ 2025-04-05 195228" src="https://github.com/user-attachments/assets/6ab565d3-332d-4957-a0db-100fd0c49e1b" />



<br>

 
## :bookmark: API ë¬¸ì„œ

[![Postman](https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white)](https://documenter.getpostman.com/view/30989395/2sAYBPktii)[![API Documentation](https://img.shields.io/badge/API%20Documentation-6B7280?style=for-the-badge&logo=book&logoColor=white)](https://documenter.getpostman.com/view/30989395/2sAYBPktii)

<br>


## ğŸ“™ERD
<img width="800" alt="í™”ë©´ ìº¡ì²˜ 2025-04-05 195107" src="https://github.com/user-attachments/assets/027814ec-5721-420f-bc5c-7914d166bad8" />





